C51 COMPILER V9.51   USBFS_VND                                                             10/03/2016 19:53:28 PAGE 1   


C51 COMPILER V9.51, COMPILATION OF MODULE USBFS_VND
OBJECT MODULE PLACED IN .\DP8051\DP8051_Keil_951\Debug\USBFS_vnd.obj
COMPILER INVOKED BY: C:\Program Files (x86)\Cypress\PSoC Creator\3.3\PSoC Creator\import\keil\pk51\9.51\C51\BIN\c51.exe 
                    -.\Generated_Source\PSoC3\USBFS_vnd.c NOIV LARGE MODDP2 OMF2 VB(1) NOIP INCDIR(.,Generated_Source\PSoC3) FF(3) DB DF(DEBU
                    -G) WL(2) PR(.\DP8051\DP8051_Keil_951\Debug/USBFS_vnd.lst) CD OT(2,SIZE) OJ(.\DP8051\DP8051_Keil_951\Debug\USBFS_vnd.obj)

line level    source

   1          /*******************************************************************************
   2          * File Name: USBFS_vnd.c
   3          * Version 2.80
   4          *
   5          * Description:
   6          *  USB vendor request handler.
   7          *
   8          * Note:
   9          *
  10          ********************************************************************************
  11          * Copyright 2008-2014, Cypress Semiconductor Corporation.  All rights reserved.
  12          * You may use this file only in accordance with the license, terms, conditions,
  13          * disclaimers, and limitations in the end user license agreement accompanying
  14          * the software package with which this file was provided.
  15          *******************************************************************************/
  16          
  17          #include "USBFS.h"
  18          #include "USBFS_pvt.h"
  19          
  20          
  21          #if(USBFS_EXTERN_VND == USBFS_FALSE)
  22          
  23          
  24          /***************************************
  25          * Vendor Specific Declarations
  26          ***************************************/
  27          
  28          /* `#START VENDOR_SPECIFIC_DECLARATIONS` Place your declaration here */
  29          
  30          /* `#END` */
  31          
  32          
  33          /*******************************************************************************
  34          * Function Name: USBFS_HandleVendorRqst
  35          ********************************************************************************
  36          *
  37          * Summary:
  38          *  This routine provide users with a method to implement vendor specific
  39          *  requests.
  40          *
  41          *  To implement vendor specific requests, add your code in this function to
  42          *  decode and disposition the request.  If the request is handled, your code
  43          *  must set the variable "requestHandled" to TRUE, indicating that the
  44          *  request has been handled.
  45          *
  46          * Parameters:
  47          *  None.
  48          *
  49          * Return:
  50          *  requestHandled.
  51          *
  52          * Reentrant:
  53          *  No.
C51 COMPILER V9.51   USBFS_VND                                                             10/03/2016 19:53:28 PAGE 2   

  54          *
  55          *******************************************************************************/
  56          uint8 USBFS_HandleVendorRqst(void) 
  57          {
  58   1          uint8 requestHandled = USBFS_FALSE;
  59   1      
  60   1          if ((CY_GET_REG8(USBFS_bmRequestType) & USBFS_RQST_DIR_MASK) == USBFS_RQST_DIR_D2H)
  61   1          {
  62   2              /* Control Read */
  63   2              switch (CY_GET_REG8(USBFS_bRequest))
  64   2              {
  65   3                  case USBFS_GET_EXTENDED_CONFIG_DESCRIPTOR:
  66   3                      #if defined(USBFS_ENABLE_MSOS_STRING)
                                  USBFS_currentTD.pData = (volatile uint8 *)&USBFS_MSOS_CONFIGURATION_DESCR[0u];
                                  USBFS_currentTD.count = USBFS_MSOS_CONFIGURATION_DESCR[0u];
                                  requestHandled  = USBFS_InitControlRead();
                              #endif /*  USBFS_ENABLE_MSOS_STRING */
  71   3                      break;
  72   3                  default:
  73   3                      break;
  74   3              }
  75   2          }
  76   1      
  77   1          /* `#START VENDOR_SPECIFIC_CODE` Place your vendor specific request here */
  78   1      
  79   1          /* `#END` */
  80   1      
  81   1          #ifdef USBFS_HANDLE_VENDOR_RQST_CALLBACK
                      USBFS_HandleVendorRqst_Callback();
                  #endif /* USBFS_HANDLE_VENDOR_RQST_CALLBACK */
  84   1      
  85   1          return(requestHandled);
  86   1      }
  87          
  88          
  89          /*******************************************************************************
  90          * Additional user functions supporting Vendor Specific Requests
  91          ********************************************************************************/
  92          
  93          /* `#START VENDOR_SPECIFIC_FUNCTIONS` Place any additional functions here */
  94          
  95          /* `#END` */
  96          
  97          #endif /* USBFS_EXTERN_VND */
  98          
  99          
 100          /* [] END OF FILE */
C51 COMPILER V9.51   USBFS_VND                                                             10/03/2016 19:53:28 PAGE 3   

ASSEMBLY LISTING OF GENERATED OBJECT CODE


             ; FUNCTION USBFS_HandleVendorRqst (BEGIN)
                                           ; SOURCE LINE # 56
                                           ; SOURCE LINE # 57
                                           ; SOURCE LINE # 58
0000 900000      R     MOV     DPTR,#requestHandled
0003 E4                CLR     A
0004 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 60
0005 906000            MOV     DPTR,#06000H
0008 E0                MOVX    A,@DPTR
0009 FF                MOV     R7,A
000A EF                MOV     A,R7
000B 5480              ANL     A,#080H
000D FF                MOV     R7,A
000E 7E00              MOV     R6,#00H
0010 EF                MOV     A,R7
0011 6480              XRL     A,#080H
0013 4E                ORL     A,R6
0014 7010              JNZ     ?C0001
                                           ; SOURCE LINE # 61
                                           ; SOURCE LINE # 63
0016 906001            MOV     DPTR,#06001H
0019 E0                MOVX    A,@DPTR
001A FF                MOV     R7,A
001B EF                MOV     A,R7
001C 120000      E     LCALL   ?C?CCASE
001F 0000        R     DW      ?C0001
0021 01                DB      01H
0022 0000              DW      00H
0024 0000        R     DW      ?C0001
                                           ; SOURCE LINE # 64
                                           ; SOURCE LINE # 65
                                           ; SOURCE LINE # 71
                                           ; SOURCE LINE # 72
                                           ; SOURCE LINE # 73
                                           ; SOURCE LINE # 74
                                           ; SOURCE LINE # 75
0026         ?C0001:
                                           ; SOURCE LINE # 85
0026 900000      R     MOV     DPTR,#requestHandled
0029 E0                MOVX    A,@DPTR
002A FF                MOV     R7,A
                                           ; SOURCE LINE # 86
002B         ?C0005:
002B 22                RET     
             ; FUNCTION USBFS_HandleVendorRqst (END)



MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =     44    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----       1
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
   EDATA SIZE       =   ----    ----
   HDATA SIZE       =   ----    ----
C51 COMPILER V9.51   USBFS_VND                                                             10/03/2016 19:53:28 PAGE 4   

   XDATA CONST SIZE =   ----    ----
   FAR CONST SIZE   =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
