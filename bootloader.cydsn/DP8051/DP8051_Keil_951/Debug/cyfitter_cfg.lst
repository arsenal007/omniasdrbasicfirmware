C51 COMPILER V9.51   CYFITTER_CFG                                                          02/23/2016 09:17:10 PAGE 1   


C51 COMPILER V9.51, COMPILATION OF MODULE CYFITTER_CFG
OBJECT MODULE PLACED IN .\DP8051\DP8051_Keil_951\Debug\cyfitter_cfg.obj
COMPILER INVOKED BY: C:\Program Files (x86)\Cypress\PSoC Creator\3.3\PSoC Creator\import\keil\pk51\9.51\C51\BIN\c51.exe 
                    -.\Generated_Source\PSoC3\cyfitter_cfg.c NOIV LARGE MODDP2 OMF2 VB(1) NOIP INCDIR(.,Generated_Source\PSoC3) FF(3) DB DF(D
                    -EBUG) WL(2) PR(.\DP8051\DP8051_Keil_951\Debug/cyfitter_cfg.lst) CD OT(5,SIZE) OJ(.\DP8051\DP8051_Keil_951\Debug\cyfitter
                    -_cfg.obj)

line level    source

   1          /*******************************************************************************
   2          * File Name: cyfitter_cfg.c
   3          * 
   4          * PSoC Creator  3.3 SP1
   5          *
   6          * Description:
   7          * This file contains device initialization code.
   8          * Except for the user defined sections in CyClockStartupError(), this file should not be modified.
   9          * This file is automatically generated by PSoC Creator.
  10          *
  11          ********************************************************************************
  12          * Copyright (c) 2007-2015 Cypress Semiconductor.  All rights reserved.
  13          * You may use this file only in accordance with the license, terms, conditions, 
  14          * disclaimers, and limitations in the end user license agreement accompanying 
  15          * the software package with which this file was provided.
  16          ********************************************************************************/
  17          
  18          #include <string.h>
  19          #include "cytypes.h"
  20          #include "cydevice_trm.h"
  21          #include "cyfitter.h"
  22          #include "CyLib.h"
  23          #include "cyfitter_cfg.h"
  24          
  25          
  26          #if defined(__C51__) || defined(__CX51__)
  27                  #define CYPACKED
  28                  #define CYPACKED_ATTR
  29                  #define CYALIGNED
  30                  
  31              #define CY_CFG_UNUSED
  32                  #define CY_CFG_MEMORY_BARRIER() do { } while (0)
  33          
  34          
  35          
  36                  #define CYMEMZERO(a,c) cymemzero((a),(c))
  37                  #define CYCONFIGCPY(d,s,c) cyconfigcpy((c),(s),(d))
  38                  #define CYCONFIGCPYCODE(d,s,c) cyconfigcpycode((c),(s),(d))
  39          #else
                      #error Unsupported toolchain
              #endif
  42          
  43          
  44          
  45          /* Clock startup error codes                                                   */
  46          #define CYCLOCKSTART_NO_ERROR    0u
  47          #define CYCLOCKSTART_XTAL_ERROR  1u
  48          #define CYCLOCKSTART_32KHZ_ERROR 2u
  49          #define CYCLOCKSTART_PLL_ERROR   3u
  50          
  51          #ifdef CY_NEED_CYCLOCKSTARTUPERROR
              /*******************************************************************************
C51 COMPILER V9.51   CYFITTER_CFG                                                          02/23/2016 09:17:10 PAGE 2   

              * Function Name: CyClockStartupError
              ********************************************************************************
              * Summary:
              *  If an error is encountered during clock configuration (crystal startup error,
              *  PLL lock error, etc.), the system will end up here.  Unless reimplemented by
              *  the customer, this function will stop in an infinite loop.
              *
              * Parameters:
              *   void
              *
              * Return:
              *   void
              *
              *******************************************************************************/
              CY_CFG_UNUSED
              static void CyClockStartupError(uint8 errorCode);
              CY_CFG_UNUSED
              static void CyClockStartupError(uint8 errorCode)
              {
                  /* To remove the compiler warning if errorCode not used.                */
                  errorCode = errorCode;
              
                  /* `#START CyClockStartupError` */
              
                  /* If we have a clock startup error (bad MHz crystal, PLL lock, etc.),  */
                  /* we will end up here to allow the customer to implement something to  */
                  /* deal with the clock condition.                                       */
              
                  /* `#END` */
              
                  /* If nothing else, stop here since the clocks have not started         */
                  /* correctly.                                                           */
                  while(1) {}
              }
              #endif
  88          
  89          
  90          /*******************************************************************************
  91          * Function Name: ClockSetup
  92          ********************************************************************************
  93          *
  94          * Summary:
  95          *  Performs the initialization of all of the clocks in the device based on the
  96          *  settings in the Clock tab of the DWR.  This includes enabling the requested
  97          *  clocks and setting the necessary dividers to produce the desired frequency. 
  98          *
  99          * Parameters:
 100          *  void
 101          *
 102          * Return:
 103          *  void
 104          *
 105          *******************************************************************************/
 106          static void ClockSetup(void);
 107          static void ClockSetup(void)
 108          {
 109   1              uint32 timeout;
 110   1      
 111   1      
 112   1              /* Configure Digital Clocks based on settings from Clock DWR */
 113   1              CY_SET_XTND_REG16((void CYFAR *)(CYREG_CLKDIST_DCFG0_CFG0), 0x5DBFu);
 114   1              CY_SET_REG8((void CYXDATA *)(CYREG_CLKDIST_DCFG0_CFG0 + 0x2u), 0x19u);
C51 COMPILER V9.51   CYFITTER_CFG                                                          02/23/2016 09:17:10 PAGE 3   

 115   1      
 116   1              /* Configure ILO based on settings from Clock DWR */
 117   1              CY_SET_REG8((void CYXDATA *)(CYREG_SLOWCLK_ILO_CR0), 0x06u);
 118   1      
 119   1              /* Configure XTAL based on settings from Clock DWR */
 120   1              CY_SET_XTND_REG16((void CYFAR *)(CYREG_FASTCLK_XMHZ_CFG0), 0x3317u);
 121   1              CY_SET_REG8((void CYXDATA *)(CYREG_FASTCLK_XMHZ_CSR), 0x05u);
 122   1              /* Wait up to 130000us for the XTAL to lock */
 123   1              CY_GET_REG8((void CYXDATA *)CYREG_FASTCLK_XMHZ_CSR);
 124   1              for (timeout = 130000u / 10u; (timeout > 0u) && ((CY_GET_REG8((void CYXDATA *)CYREG_FASTCLK_XMHZ_CSR) & 0
             -x80u) != 0u); timeout--)
 125   1              { 
 126   2                      
 127   2                      CyDelayCycles(10u * 48u); /* Delay 10us based on 48MHz clock */
 128   2              }
 129   1      
 130   1              /* Configure IMO based on settings from Clock DWR */
 131   1              CY_SET_REG8((void CYXDATA *)(CYREG_FASTCLK_IMO_CR), 0x52u);
 132   1              CY_SET_REG8((void CYXDATA *)(CYREG_IMO_TR1), (CY_GET_XTND_REG8((void CYFAR *)CYREG_FLSHID_CUST_TABLES_IMO
             -_USB)));
 133   1      
 134   1              /* Configure Bus/Master Clock based on settings from Clock DWR */
 135   1              CY_SET_XTND_REG16((void CYFAR *)(CYREG_CLKDIST_MSTR0), 0x0000u);
 136   1              CY_SET_REG8((void CYXDATA *)(CYREG_CLKDIST_MSTR0), 0x07u);
 137   1              CY_SET_REG8((void CYXDATA *)(CYREG_CLKDIST_BCFG0), 0x00u);
 138   1              CY_SET_REG8((void CYXDATA *)(CYREG_CLKDIST_BCFG2), 0x48u);
 139   1              CY_SET_REG8((void CYXDATA *)(CYREG_CLKDIST_MSTR0), 0x00u);
 140   1      
 141   1              /* Configure USB Clock based on settings from Clock DWR */
 142   1              CY_SET_REG8((void CYXDATA *)(CYREG_CLKDIST_UCFG), 0x00u);
 143   1              CY_SET_REG8((void CYXDATA *)(CYREG_CLKDIST_LD), 0x02u);
 144   1      
 145   1              CY_SET_REG8((void CYXDATA *)(CYREG_PM_ACT_CFG2), ((CY_GET_REG8((void CYXDATA *)CYREG_PM_ACT_CFG2) | 0x01u
             -)));
 146   1      }
 147          
 148          
 149          /* Analog API Functions */
 150          
 151          
 152          /*******************************************************************************
 153          * Function Name: AnalogSetDefault
 154          ********************************************************************************
 155          *
 156          * Summary:
 157          *  Sets up the analog portions of the chip to default values based on chip
 158          *  configuration options from the project.
 159          *
 160          * Parameters:
 161          *  void
 162          *
 163          * Return:
 164          *  void
 165          *
 166          *******************************************************************************/
 167          static void AnalogSetDefault(void);
 168          static void AnalogSetDefault(void)
 169          {
 170   1              uint8 bg_xover_inl_trim = CY_GET_XTND_REG8((void CYFAR *)(CYREG_FLSHID_MFG_CFG_BG_XOVER_INL_TRIM + 1u));
 171   1              CY_SET_REG8((void CYXDATA *)(CYREG_BG_DFT0), (bg_xover_inl_trim & 0x07u));
 172   1              CY_SET_REG8((void CYXDATA *)(CYREG_BG_DFT1), ((bg_xover_inl_trim >> 4) & 0x0Fu));
 173   1              CY_SET_REG8((void CYXDATA *)CYREG_PUMP_CR0, 0x44u);
C51 COMPILER V9.51   CYFITTER_CFG                                                          02/23/2016 09:17:10 PAGE 4   

 174   1      }
 175          
 176          
 177          /*******************************************************************************
 178          * Function Name: SetAnalogRoutingPumps
 179          ********************************************************************************
 180          *
 181          * Summary:
 182          * Enables or disables the analog pumps feeding analog routing switches.
 183          * Intended to be called at startup, based on the Vdda system configuration;
 184          * may be called during operation when the user informs us that the Vdda voltage
 185          * crossed the pump threshold.
 186          *
 187          * Parameters:
 188          *  enabled - 1 to enable the pumps, 0 to disable the pumps
 189          *
 190          * Return:
 191          *  void
 192          *
 193          *******************************************************************************/
 194          void SetAnalogRoutingPumps(uint8 enabled)
 195          {
 196   1              uint8 regValue = CY_GET_REG8((void CYXDATA *)CYREG_PUMP_CR0);
 197   1              if (enabled != 0u)
 198   1              {
 199   2                      regValue |= 0x00u;
 200   2              }
 201   1              else
 202   1              {
 203   2                      regValue &= (uint8)~0x00u;
 204   2              }
 205   1              CY_SET_REG8((void CYXDATA *)CYREG_PUMP_CR0, regValue);
 206   1      }
 207          
 208          #define CY_AMUX_UNUSED CYREG_BOOST_SR
 209          
 210          
 211          /*******************************************************************************
 212          * Function Name: cyfitter_cfg
 213          ********************************************************************************
 214          * Summary:
 215          *  This function is called by the start-up code for the selected device. It
 216          *  performs all of the necessary device configuration based on the design
 217          *  settings.  This includes settings from the Design Wide Resources (DWR) such
 218          *  as Clocks and Pins as well as any component configuration that is necessary.
 219          *
 220          * Parameters:  
 221          *   void
 222          *
 223          * Return:
 224          *   void
 225          *
 226          *******************************************************************************/
 227          
 228          void cyfitter_cfg(void)
 229          {
 230   1              /* IOPINS0_8 Address: CYREG_PRT15_DR Size (bytes): 10 */
 231   1              static const uint8 CYCODE BS_IOPINS0_8_VAL[] = {
 232   1                      0x00u, 0x00u, 0x00u, 0x00u, 0x00u, 0x00u, 0x00u, 0x00u, 0xC0u, 0x00u};
 233   1      
 234   1              /* IOPINS0_1 Address: CYREG_PRT1_DM0 Size (bytes): 8 */
 235   1              static const uint8 CYCODE BS_IOPINS0_1_VAL[] = {
C51 COMPILER V9.51   CYFITTER_CFG                                                          02/23/2016 09:17:10 PAGE 5   

 236   1                      0x00u, 0x24u, 0x00u, 0x00u, 0x00u, 0x00u, 0x00u, 0x00u};
 237   1      
 238   1              /* IOPINS0_2 Address: CYREG_PRT2_DM0 Size (bytes): 8 */
 239   1              static const uint8 CYCODE BS_IOPINS0_2_VAL[] = {
 240   1                      0x00u, 0x00u, 0x60u, 0x00u, 0x60u, 0x00u, 0x00u, 0x00u};
 241   1      
 242   1              /* Enable/Disable Debug functionality based on settings from System DWR */
 243   1              CY_SET_XTND_REG8((void CYFAR *)CYREG_MLOGIC_DEBUG, (CY_GET_XTND_REG8((void CYFAR *)CYREG_MLOGIC_DEBUG) | 
             -0x05u));
 244   1      
 245   1              {
 246   2                      static const uint8 CYCODE cfg_byte_table[] = {
 247   2                              0x13u,
 248   2                              0x00u, 0x45u, 0x01u, /* Base address 0x004500 */
 249   2                              /* CYDEV_PICU_INTTYPE_PICU15_BASE */
 250   2                              0x7Eu, 0x02u, 
 251   2                              0x00u, 0x4Fu, 0x01u, /* Base address 0x004F00 */
 252   2                              /* CYREG_TMR0_CFG0 */
 253   2                              0x0Au, 0x4Bu, 
 254   2                              0x00u, 0x52u, 0x04u, /* Base address 0x005200 */
 255   2                              /* CYDEV_PRTDSI_PRT1_BASE */
 256   2                              0x0Cu, 0x20u, 
 257   2                              /* CYDEV_PRTDSI_PRT2_BASE */
 258   2                              0x10u, 0x60u, 0x11u, 0x60u, 
 259   2                              /* CYDEV_PRTDSI_PRT15_BASE */
 260   2                              0x7Cu, 0x40u, 
 261   2                              0x00u, 0x64u, 0x01u, /* Base address 0x006400 */
 262   2                              /* CYDEV_UWRK_UWRK8_B0_BASE + 0x00000070u */
 263   2                              0x7Du, 0x01u, 
 264   2                              0x01u, 0x05u, 0x01u, /* Base address 0x010500 */
 265   2                              /* CYDEV_UCFG_B0_P2_ROUTE_BASE + 0x00000080u */
 266   2                              0xEEu, 0x01u, 
 267   2                              0x01u, 0x0Bu, 0x01u, /* Base address 0x010B00 */
 268   2                              /* CYDEV_UCFG_B0_P5_ROUTE_BASE + 0x00000080u */
 269   2                              0xAAu, 0x40u, 
 270   2                              0x01u, 0x0Cu, 0x04u, /* Base address 0x010C00 */
 271   2                              /* CYDEV_UCFG_B0_P6_U1_BASE */
 272   2                              0xBEu, 0x01u, 0xD8u, 0x04u, 0xDBu, 0x04u, 0xDFu, 0x01u, 
 273   2                              0x01u, 0x0Du, 0x03u, /* Base address 0x010D00 */
 274   2                              /* CYDEV_UCFG_B0_P6_ROUTE_BASE */
 275   2                              0x1Au, 0x80u, 0x68u, 0x01u, 
 276   2                              /* CYDEV_UCFG_B0_P6_ROUTE_BASE + 0x00000080u */
 277   2                              0x88u, 0x01u, 
 278   2                              0x01u, 0x17u, 0x01u, /* Base address 0x011700 */
 279   2                              /* CYDEV_UCFG_B1_P3_ROUTE_BASE + 0x00000080u */
 280   2                              0xEEu, 0x0Au, 
 281   2                              0x01u, 0x19u, 0x01u, /* Base address 0x011900 */
 282   2                              /* CYDEV_UCFG_B1_P4_ROUTE_BASE + 0x00000080u */
 283   2                              0xEEu, 0x0Au, 
 284   2                              0x01u, 0x40u, 0x04u, /* Base address 0x014000 */
 285   2                              /* CYDEV_UCFG_DSI0_BASE */
 286   2                              0x32u, 0x04u, 0x33u, 0x80u, 0x36u, 0x40u, 
 287   2                              /* CYDEV_UCFG_DSI0_BASE + 0x00000080u */
 288   2                              0xCCu, 0x70u, 
 289   2                              0x01u, 0x41u, 0x03u, /* Base address 0x014100 */
 290   2                              /* CYDEV_UCFG_DSI1_BASE + 0x00000080u */
 291   2                              0x96u, 0x08u, 0xA6u, 0x40u, 0xA7u, 0x80u, 
 292   2                              0x01u, 0x42u, 0x0Au, /* Base address 0x014200 */
 293   2                              /* CYDEV_UCFG_DSI2_BASE */
 294   2                              0x12u, 0x80u, 0x5Bu, 0x02u, 
 295   2                              /* CYDEV_UCFG_DSI2_BASE + 0x00000080u */
 296   2                              0x96u, 0x08u, 0x9Bu, 0x02u, 0xA6u, 0x40u, 0xA7u, 0x80u, 0xABu, 0x02u, 0xC4u, 0x10u, 0xD6u, 0x40u, 0xEEu
C51 COMPILER V9.51   CYFITTER_CFG                                                          02/23/2016 09:17:10 PAGE 6   

             -, 0x80u, 
 297   2                              0x01u, 0x43u, 0x03u, /* Base address 0x014300 */
 298   2                              /* CYDEV_UCFG_DSI3_BASE + 0x00000080u */
 299   2                              0xA6u, 0x40u, 0xA7u, 0x80u, 0xAEu, 0x84u, 
 300   2                              0x01u, 0x45u, 0x04u, /* Base address 0x014500 */
 301   2                              /* CYDEV_UCFG_DSI5_BASE */
 302   2                              0x64u, 0x08u, 
 303   2                              /* CYDEV_UCFG_DSI5_BASE + 0x00000080u */
 304   2                              0x88u, 0x08u, 0xD8u, 0x01u, 0xE0u, 0x01u, 
 305   2                              0x01u, 0x47u, 0x03u, /* Base address 0x014700 */
 306   2                              /* CYDEV_UCFG_DSI7_BASE */
 307   2                              0x08u, 0x08u, 0x0Fu, 0x40u, 
 308   2                              /* CYDEV_UCFG_DSI7_BASE + 0x00000080u */
 309   2                              0xC2u, 0x0Cu, 
 310   2                              0x01u, 0x48u, 0x03u, /* Base address 0x014800 */
 311   2                              /* CYDEV_UCFG_DSI8_BASE + 0x00000080u */
 312   2                              0xAEu, 0x40u, 0xAFu, 0x80u, 0xEEu, 0x50u, 
 313   2                              0x01u, 0x4Cu, 0x02u, /* Base address 0x014C00 */
 314   2                              /* CYDEV_UCFG_DSI12_BASE + 0x00000080u */
 315   2                              0xACu, 0x08u, 0xAFu, 0x40u, 
 316   2                              0x01u, 0x51u, 0x01u, /* Base address 0x015100 */
 317   2                              /* CYREG_IDMUX_IRQ_CTL0 */
 318   2                              0x00u, 0x3Au, 
 319   2                      };
 320   2                      /* BYTES: 160 */
 321   2      
 322   2      
 323   2                      CYPACKED typedef struct {
 324   2                              void CYFAR *address;
 325   2                              uint16 size;
 326   2                      } CYPACKED_ATTR cfg_memset_t;
 327   2      
 328   2                      static const cfg_memset_t CYCODE cfg_memset_list [] = {
 329   2                              /* address, size */
 330   2                              {(void CYFAR *)(CYREG_TMR0_CFG0), 12u},
 331   2                              {(void CYFAR *)(CYREG_PRT0_DR), 16u},
 332   2                              {(void CYFAR *)(CYREG_PRT3_DR), 64u},
 333   2                              {(void CYFAR *)(CYREG_PRT12_DR), 16u},
 334   2                              {(void CYFAR *)(CYDEV_UCFG_B0_P0_U0_BASE), 4096u},
 335   2                              {(void CYFAR *)(CYDEV_UCFG_B1_P2_U0_BASE), 2048u},
 336   2                              {(void CYFAR *)(CYDEV_UCFG_DSI0_BASE), 2560u},
 337   2                              {(void CYFAR *)(CYDEV_UCFG_DSI12_BASE), 512u},
 338   2                              {(void CYFAR *)(CYREG_BCTL0_MDCLK_EN), 32u},
 339   2                      };
 340   2      
 341   2                      uint8 CYDATA i;
 342   2      
 343   2                      /* Zero out critical memory blocks before beginning configuration */
 344   2                      for (i = 0u; i < (sizeof(cfg_memset_list)/sizeof(cfg_memset_list[0])); i++)
 345   2                      {
 346   3                              const cfg_memset_t CYCODE * CYDATA ms = &cfg_memset_list[i];
 347   3                              CYMEMZERO(ms->address, ms->size);
 348   3                      }
 349   2      
 350   2                      cfg_write_bytes_code(cfg_byte_table);
 351   2      
 352   2                      /* Enable digital routing */
 353   2                      CY_SET_XTND_REG8((void CYFAR *)CYREG_BCTL0_BANK_CTL, CY_GET_XTND_REG8((void CYFAR *)CYREG_BCTL0_BANK_CTL
             -) | 0x02u);
 354   2                      CY_SET_XTND_REG8((void CYFAR *)CYREG_BCTL1_BANK_CTL, CY_GET_XTND_REG8((void CYFAR *)CYREG_BCTL1_BANK_CTL
             -) | 0x02u);
 355   2      
C51 COMPILER V9.51   CYFITTER_CFG                                                          02/23/2016 09:17:10 PAGE 7   

 356   2                      /* Enable UDB array */
 357   2                      CY_SET_REG8((void CYXDATA *)CYREG_PM_ACT_CFG0, CY_GET_REG8((void CYXDATA *)CYREG_PM_ACT_CFG0) | 0x40u);
 358   2                      CY_SET_REG8((void CYXDATA *)CYREG_PM_AVAIL_CR2, CY_GET_REG8((void CYXDATA *)CYREG_PM_AVAIL_CR2) | 0x10u)
             -;
 359   2              }
 360   1      
 361   1      
 362   1              /* Perform second pass device configuration. These items must be configured in specific order after the r
             -egular configuration is done. */
 363   1              CYCONFIGCPYCODE((void CYFAR *)(CYREG_PRT15_DR), (const void CYCODE *)(BS_IOPINS0_8_VAL), 10u);
 364   1              CYCONFIGCPYCODE((void CYFAR *)(CYREG_PRT1_DM0), (const void CYCODE *)(BS_IOPINS0_1_VAL), 8u);
 365   1              CYCONFIGCPYCODE((void CYFAR *)(CYREG_PRT2_DM0), (const void CYCODE *)(BS_IOPINS0_2_VAL), 8u);
 366   1              CY_SET_REG8((void CYXDATA *)(CYREG_INTC_CSR_EN), 0x01u);
 367   1              /* Switch Boost to the precision bandgap reference from its internal reference */
 368   1              CY_SET_REG8((void CYXDATA *)CYREG_BOOST_CR2, (CY_GET_REG8((void CYXDATA *)CYREG_BOOST_CR2) | 0x08u));
 369   1              if (CYDEV_CHIP_REV_ACTUAL < 5u)
 370   1              {
 371   2                      CY_SET_REG8((void CYXDATA *)CYREG_PWRSYS_WAKE_TR2, 0x3Au);
 372   2              }
 373   1      
 374   1      
 375   1              /* Set Flash Cycles based on max possible frequency in case a glitch occurs during ClockSetup(). */
 376   1              CY_SET_REG8((void CYXDATA *)(CYREG_CACHE_CR), (((CYDEV_INSTRUCT_CACHE_ENABLED) != 0) ? 0xF1u : 0xC0u));
 377   1              /* Setup clocks based on selections from Clock DWR */
 378   1              ClockSetup();
 379   1              /* Set Flash Cycles based on newly configured 24.00MHz Bus Clock. */
 380   1              CY_SET_REG8((void CYXDATA *)(CYREG_CACHE_CR), (((CYDEV_INSTRUCT_CACHE_ENABLED) != 0) ? 0xB1u : 0x80u));
 381   1      
 382   1              /* Perform basic analog initialization to defaults */
 383   1              AnalogSetDefault();
 384   1      
 385   1              /* Configure alternate active mode */
 386   1              CYCONFIGCPY((void CYFAR *)CYDEV_PM_STBY_BASE, (const void CYFAR *)CYDEV_PM_ACT_BASE, 14u);
 387   1              CY_SET_REG8((void CYXDATA *)CYREG_PM_STBY_CFG0, CY_GET_REG8((void CYXDATA *)CYREG_PM_STBY_CFG0) & (uint8)
             -~0x02u);        /* Disable CPU */
 388   1      }
C51 COMPILER V9.51   CYFITTER_CFG                                                          02/23/2016 09:17:10 PAGE 8   

ASSEMBLY LISTING OF GENERATED OBJECT CODE


             ; FUNCTION ClockSetup (BEGIN)
                                           ; SOURCE LINE # 107
                                           ; SOURCE LINE # 108
                                           ; SOURCE LINE # 113
0000 7B00              MOV     R3,#00H
0002 7A40              MOV     R2,#040H
0004 7980              MOV     R1,#080H
0006 7DBF              MOV     R5,#0BFH
0008 7C5D              MOV     R4,#05DH
000A 120000      E     LCALL   _cywrite16
                                           ; SOURCE LINE # 114
000D 904082            MOV     DPTR,#04082H
0010 7419              MOV     A,#019H
0012 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 117
0013 904300            MOV     DPTR,#04300H
0016 7406              MOV     A,#06H
0018 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 120
0019 7B00              MOV     R3,#00H
001B 7A42              MOV     R2,#042H
001D 7912              MOV     R1,#012H
001F 7D17              MOV     R5,#017H
0021 7C33              MOV     R4,#033H
0023 120000      E     LCALL   _cywrite16
                                           ; SOURCE LINE # 121
0026 904210            MOV     DPTR,#04210H
0029 7405              MOV     A,#05H
002B F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 123
002C E0                MOVX    A,@DPTR
002D FF                MOV     R7,A
                                           ; SOURCE LINE # 124
002E E4                CLR     A
002F 7FC8              MOV     R7,#0C8H
0031 7E32              MOV     R6,#032H
0033 FD                MOV     R5,A
0034 FC                MOV     R4,A
0035 900000      R     MOV     DPTR,#timeout
0038 120000      E     LCALL   ?C?LSTXDATA
003B         ?C0001:
003B 900000      R     MOV     DPTR,#timeout
003E 120000      E     LCALL   ?C?LLDXDATA
0041 D3                SETB    C
0042 EF                MOV     A,R7
0043 9400              SUBB    A,#00H
0045 EE                MOV     A,R6
0046 9400              SUBB    A,#00H
0048 4029              JC      ?C0002
004A 904210            MOV     DPTR,#04210H
004D E0                MOVX    A,@DPTR
004E 5480              ANL     A,#080H
0050 6021              JZ      ?C0002
                                           ; SOURCE LINE # 125
                                           ; SOURCE LINE # 127
0052 E4                CLR     A
0053 7FE0              MOV     R7,#0E0H
0055 7E01              MOV     R6,#01H
0057 FD                MOV     R5,A
C51 COMPILER V9.51   CYFITTER_CFG                                                          02/23/2016 09:17:10 PAGE 9   

0058 FC                MOV     R4,A
0059 120000      E     LCALL   _CyDelayCycles
                                           ; SOURCE LINE # 128
005C 900000      R     MOV     DPTR,#timeout
005F 120000      E     LCALL   ?C?LLDXDATA
0062 74FF              MOV     A,#0FFH
0064 FB                MOV     R3,A
0065 FA                MOV     R2,A
0066 F9                MOV     R1,A
0067 F8                MOV     R0,A
0068 120000      E     LCALL   ?C?LADD
006B 900000      R     MOV     DPTR,#timeout
006E 120000      E     LCALL   ?C?LSTXDATA
0071 80C8              SJMP    ?C0001
0073         ?C0002:
                                           ; SOURCE LINE # 131
0073 904200            MOV     DPTR,#04200H
0076 7452              MOV     A,#052H
0078 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 132
0079 7B0C              MOV     R3,#0CH
007B 7A01              MOV     R2,#01H
007D 790F              MOV     R1,#0FH
007F 120000      E     LCALL   _cyread8
0082 9046A1            MOV     DPTR,#046A1H
0085 EF                MOV     A,R7
0086 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 135
0087 7B00              MOV     R3,#00H
0089 7A40              MOV     R2,#040H
008B 7904              MOV     R1,#04H
008D E4                CLR     A
008E FD                MOV     R5,A
008F FC                MOV     R4,A
0090 120000      E     LCALL   _cywrite16
                                           ; SOURCE LINE # 136
0093 904004            MOV     DPTR,#04004H
0096 7407              MOV     A,#07H
0098 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 137
0099 904006            MOV     DPTR,#04006H
009C E4                CLR     A
009D F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 138
009E 904008            MOV     DPTR,#04008H
00A1 7448              MOV     A,#048H
00A3 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 139
00A4 904004            MOV     DPTR,#04004H
00A7 E4                CLR     A
00A8 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 142
00A9 904009            MOV     DPTR,#04009H
00AC F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 143
00AD 904001            MOV     DPTR,#04001H
00B0 7402              MOV     A,#02H
00B2 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 145
00B3 9043A2            MOV     DPTR,#043A2H
00B6 E0                MOVX    A,@DPTR
00B7 4401              ORL     A,#01H
C51 COMPILER V9.51   CYFITTER_CFG                                                          02/23/2016 09:17:10 PAGE 10  

00B9 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 146
00BA 22                RET     
             ; FUNCTION ClockSetup (END)

             ; FUNCTION AnalogSetDefault (BEGIN)
                                           ; SOURCE LINE # 168
                                           ; SOURCE LINE # 169
                                           ; SOURCE LINE # 170
0000 7B0C              MOV     R3,#0CH
0002 7A01              MOV     R2,#01H
0004 79CF              MOV     R1,#0CFH
0006 120000      E     LCALL   _cyread8
;---- Variable 'bg_xover_inl_trim' assigned to Register 'R7' ----
                                           ; SOURCE LINE # 171
0009 EF                MOV     A,R7
000A 5407              ANL     A,#07H
000C 90586E            MOV     DPTR,#0586EH
000F F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 172
0010 EF                MOV     A,R7
0011 C4                SWAP    A
0012 540F              ANL     A,#0FH
0014 A3                INC     DPTR
0015 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 173
0016 905876            MOV     DPTR,#05876H
0019 7444              MOV     A,#044H
001B F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 174
001C 22                RET     
             ; FUNCTION AnalogSetDefault (END)

             ; FUNCTION _SetAnalogRoutingPumps (BEGIN)
                                           ; SOURCE LINE # 194
;---- Variable 'enabled' assigned to Register 'R7' ----
                                           ; SOURCE LINE # 195
                                           ; SOURCE LINE # 196
0000 905876            MOV     DPTR,#05876H
0003 E0                MOVX    A,@DPTR
0004 FE                MOV     R6,A
;---- Variable 'regValue' assigned to Register 'R6' ----
                                           ; SOURCE LINE # 197
0005 EF                MOV     A,R7
0006 6003              JZ      ?C0006
                                           ; SOURCE LINE # 198
                                           ; SOURCE LINE # 199
0008 EE                MOV     A,R6
                                           ; SOURCE LINE # 200
0009 8001              SJMP    ?C0007
000B         ?C0006:
                                           ; SOURCE LINE # 202
                                           ; SOURCE LINE # 203
000B EE                MOV     A,R6
                                           ; SOURCE LINE # 204
000C         ?C0007:
                                           ; SOURCE LINE # 205
000C AF06              MOV     R7,AR6
000E 905876            MOV     DPTR,#05876H
0011 EE                MOV     A,R6
0012 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 206
C51 COMPILER V9.51   CYFITTER_CFG                                                          02/23/2016 09:17:10 PAGE 11  

0013 22                RET     
             ; FUNCTION _SetAnalogRoutingPumps (END)

             ; FUNCTION cyfitter_cfg (BEGIN)
                                           ; SOURCE LINE # 228
                                           ; SOURCE LINE # 229
                                           ; SOURCE LINE # 243
0000 7B00              MOV     R3,#00H
0002 7A46              MOV     R2,#046H
0004 79E8              MOV     R1,#0E8H
0006 120000      E     LCALL   _cyread8
0009 EF                MOV     A,R7
000A 4405              ORL     A,#05H
000C FD                MOV     R5,A
000D 7B00              MOV     R3,#00H
000F 7A46              MOV     R2,#046H
0011 79E8              MOV     R1,#0E8H
0013 120000      E     LCALL   _cywrite8
                                           ; SOURCE LINE # 245
                                           ; SOURCE LINE # 344
0016 E4                CLR     A
0017 F500        R     MOV     i,A
0019         ?C0009:
0019 E500        R     MOV     A,i
001B C3                CLR     C
001C 9409              SUBB    A,#09H
001E 502C              JNC     ?C0010
                                           ; SOURCE LINE # 345
                                           ; SOURCE LINE # 346
0020 E500        R     MOV     A,i
0022 75F005            MOV     B,#05H
0025 A4                MUL     AB
0026 2400        R     ADD     A,#LOW cfg_memset_list
0028 F582              MOV     DPL,A
002A E4                CLR     A
002B 3400        R     ADDC    A,#HIGH cfg_memset_list
002D AF82              MOV     R7,DPL
002F F500        R     MOV     ms,A
0031 8F00        R     MOV     ms+01H,R7
                                           ; SOURCE LINE # 347
0033 F583              MOV     DPH,A
0035 120000      E     LCALL   ?C?PLDCODE
0038 8F82              MOV     DPL,R7
003A 850083      R     MOV     DPH,ms
003D 7403              MOV     A,#03H
003F 93                MOVC    A,@A+DPTR
0040 FC                MOV     R4,A
0041 7404              MOV     A,#04H
0043 93                MOVC    A,@A+DPTR
0044 FD                MOV     R5,A
0045 120000      E     LCALL   _cymemzero
                                           ; SOURCE LINE # 348
0048 0500        R     INC     i
004A 80CD              SJMP    ?C0009
004C         ?C0010:
                                           ; SOURCE LINE # 350
004C 7E00        R     MOV     R6,#HIGH cfg_byte_table
004E 7F00        R     MOV     R7,#LOW cfg_byte_table
0050 120000      E     LCALL   _cfg_write_bytes_code
                                           ; SOURCE LINE # 353
0053 7B01              MOV     R3,#01H
0055 7A50              MOV     R2,#050H
C51 COMPILER V9.51   CYFITTER_CFG                                                          02/23/2016 09:17:10 PAGE 12  

0057 7903              MOV     R1,#03H
0059 120000      E     LCALL   _cyread8
005C EF                MOV     A,R7
005D 4402              ORL     A,#02H
005F FD                MOV     R5,A
0060 7B01              MOV     R3,#01H
0062 7A50              MOV     R2,#050H
0064 7903              MOV     R1,#03H
0066 120000      E     LCALL   _cywrite8
                                           ; SOURCE LINE # 354
0069 7B01              MOV     R3,#01H
006B 7A50              MOV     R2,#050H
006D 7913              MOV     R1,#013H
006F 120000      E     LCALL   _cyread8
0072 EF                MOV     A,R7
0073 4402              ORL     A,#02H
0075 FD                MOV     R5,A
0076 7B01              MOV     R3,#01H
0078 7A50              MOV     R2,#050H
007A 7913              MOV     R1,#013H
007C 120000      E     LCALL   _cywrite8
                                           ; SOURCE LINE # 357
007F 9043A0            MOV     DPTR,#043A0H
0082 E0                MOVX    A,@DPTR
0083 4440              ORL     A,#040H
0085 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 358
0086 9043C2            MOV     DPTR,#043C2H
0089 E0                MOVX    A,@DPTR
008A 4410              ORL     A,#010H
008C F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 359
                                           ; SOURCE LINE # 363
008D 7C00        R     MOV     R4,#HIGH BS_IOPINS0_8_VAL
008F 7D00        R     MOV     R5,#LOW BS_IOPINS0_8_VAL
0091 7B00              MOV     R3,#00H
0093 7A51              MOV     R2,#051H
0095 79F0              MOV     R1,#0F0H
0097 7F0A              MOV     R7,#0AH
0099 7E00              MOV     R6,#00H
009B 120000      E     LCALL   _cyconfigcpycode
                                           ; SOURCE LINE # 364
009E 7C00        R     MOV     R4,#HIGH BS_IOPINS0_1_VAL
00A0 7D00        R     MOV     R5,#LOW BS_IOPINS0_1_VAL
00A2 7B00              MOV     R3,#00H
00A4 7A51              MOV     R2,#051H
00A6 7912              MOV     R1,#012H
00A8 7F08              MOV     R7,#08H
00AA 7E00              MOV     R6,#00H
00AC 120000      E     LCALL   _cyconfigcpycode
                                           ; SOURCE LINE # 365
00AF 7C00        R     MOV     R4,#HIGH BS_IOPINS0_2_VAL
00B1 7D00        R     MOV     R5,#LOW BS_IOPINS0_2_VAL
00B3 7B00              MOV     R3,#00H
00B5 7A51              MOV     R2,#051H
00B7 7922              MOV     R1,#022H
00B9 7F08              MOV     R7,#08H
00BB 7E00              MOV     R6,#00H
00BD 120000      E     LCALL   _cyconfigcpycode
                                           ; SOURCE LINE # 366
00C0 9044F4            MOV     DPTR,#044F4H
00C3 7401              MOV     A,#01H
C51 COMPILER V9.51   CYFITTER_CFG                                                          02/23/2016 09:17:10 PAGE 13  

00C5 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 368
00C6 904322            MOV     DPTR,#04322H
00C9 E0                MOVX    A,@DPTR
00CA 4408              ORL     A,#08H
00CC F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 369
00CD 9046EC            MOV     DPTR,#046ECH
00D0 E0                MOVX    A,@DPTR
00D1 C3                CLR     C
00D2 9405              SUBB    A,#05H
00D4 5006              JNC     ?C0012
                                           ; SOURCE LINE # 370
                                           ; SOURCE LINE # 371
00D6 904689            MOV     DPTR,#04689H
00D9 743A              MOV     A,#03AH
00DB F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 372
00DC         ?C0012:
                                           ; SOURCE LINE # 376
00DC 904800            MOV     DPTR,#04800H
00DF 74F1              MOV     A,#0F1H
00E1 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 378
00E2 120000      R     LCALL   ClockSetup
                                           ; SOURCE LINE # 380
00E5 904800            MOV     DPTR,#04800H
00E8 74B1              MOV     A,#0B1H
00EA F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 383
00EB 120000      R     LCALL   AnalogSetDefault
                                           ; SOURCE LINE # 386
00EE 7B00              MOV     R3,#00H
00F0 7A43              MOV     R2,#043H
00F2 79A0              MOV     R1,#0A0H
00F4 C001              PUSH    AR1
00F6 79B0              MOV     R1,#0B0H
00F8 900000      E     MOV     DPTR,#?_cyconfigcpy?BYTE+05H
00FB 120000      E     LCALL   ?C?PSTXDATA
00FE D001              POP     AR1
0100 7F0E              MOV     R7,#0EH
0102 7E00              MOV     R6,#00H
0104 120000      E     LCALL   _cyconfigcpy
                                           ; SOURCE LINE # 387
0107 9043B0            MOV     DPTR,#043B0H
010A E0                MOVX    A,@DPTR
010B 54FD              ANL     A,#0FDH
010D F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 388
010E 22                RET     
             ; FUNCTION cyfitter_cfg (END)



MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    507    ----
   CONSTANT SIZE    =    231    ----
   XDATA SIZE       =   ----       4
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----       3
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
C51 COMPILER V9.51   CYFITTER_CFG                                                          02/23/2016 09:17:10 PAGE 14  

   EDATA SIZE       =   ----    ----
   HDATA SIZE       =   ----    ----
   XDATA CONST SIZE =   ----    ----
   FAR CONST SIZE   =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
