C51 COMPILER V9.51   USBVEND                                                               10/24/2015 08:30:42 PAGE 1   


C51 COMPILER V9.51, COMPILATION OF MODULE USBVEND
OBJECT MODULE PLACED IN .\DP8051\DP8051_Keil_951\Debug\usbvend.obj
COMPILER INVOKED BY: C:\Program Files (x86)\Cypress\PSoC Creator\3.3\PSoC Creator\import\keil\pk51\9.51\C51\BIN\c51.exe 
                    -.\usbvend.c NOIV LARGE MODDP2 OMF2 VB(1) NOIP INCDIR(.,Generated_Source\PSoC3) FF(3) DB WL(2) PR(.\DP8051\DP8051_Keil_95
                    -1\Debug/usbvend.lst) CD OT(5,SIZE) OJ(.\DP8051\DP8051_Keil_951\Debug\usbvend.obj)

line level    source

   1          // Copyright 2013 David Turnbull AE9RB
   2          //
   3          // Licensed under the Apache License, Version 2.0 (the "License");
   4          // you may not use this file except in compliance with the License.
   5          // You may obtain a copy of the License at
   6          //
   7          //     http://www.apache.org/licenses/LICENSE-2.0
   8          //
   9          // Unless required by applicable law or agreed to in writing, software
  10          // distributed under the License is distributed on an "AS IS" BASIS,
  11          // WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  12          // See the License for the specific language governing permissions and
  13          // limitations under the License.
  14          // 09/30/2014 Additions to support low latency CW and Iambic funtionality  Ron Patton / W4MMP
  15          // 01/01/2015 Added Semi Break-in Support Ron Patton / W4MMP
  16          
  17          #include <peaberry.h>
  18          
  19          uint32 result;
  20          
  21          // Maps PSoC registers into one that looks like the AVR
  22          uint8 emulated_register(void) {
  23   1          uint8 reg = 0, key;
  24   1          if (TX_Request) reg |= 0x10;
  25   1          key = Status_Read();
  26   1          if (key & STATUS_KEY_0) reg |= 0x20;
  27   1          if (key & STATUS_KEY_1) reg |= 0x02;
  28   1          return reg;
  29   1      }
  30          
  31          uint8 USBFS_HandleVendorRqst(void) 
  32          {
  33   1          uint8 requestHandled = USBFS_FALSE;
  34   1          uint8 reqType, reqCmd;
  35   1          
  36   1          reqType = CY_GET_REG8(USBFS_bmRequestType);
  37   1          reqCmd = CY_GET_REG8(USBFS_bRequest);
  38   1      
  39   1          if ((reqType & USBFS_RQST_DIR_MASK) == USBFS_RQST_DIR_D2H)
  40   1          {
  41   2              switch (reqCmd)
  42   2              {
  43   3                  case 0x00: // CMD_GET_VERSION
  44   3                      *(uint16*)&result = FIRMWARE_VERSION; 
  45   3                      USBFS_currentTD.pData = (void *)&result;
  46   3                      USBFS_currentTD.count = 2;
  47   3                      requestHandled  = USBFS_InitControlRead();
  48   3                      break;
  49   3                  case 0x02: // CMD_GET_PIN
  50   3                      // used on the test tab in cfgsr
  51   3                      *(uint8*)&result = emulated_register();
  52   3                      result |= 0x08000000; // 3.3v indicator
  53   3                      USBFS_currentTD.pData = (void *)&result;
C51 COMPILER V9.51   USBVEND                                                               10/24/2015 08:30:42 PAGE 2   

  54   3                      USBFS_currentTD.count = 1;
  55   3                      requestHandled  = USBFS_InitControlRead();
  56   3                      break;
  57   3                  case 0x3A: // CMD_GET_FREQ
  58   3                      USBFS_currentTD.pData = (void *)&Si570_LO;
  59   3                      USBFS_currentTD.count = sizeof(Si570_LO);
  60   3                      requestHandled  = USBFS_InitControlRead();
  61   3                      break;
  62   3                  case 0x3C: // CMD_GET_STARTUP
  63   3                      result = swap32(SI570_STARTUP_FREQ * 0x0200000);
  64   3                      USBFS_currentTD.pData = (void *)&result;
  65   3                      USBFS_currentTD.count = sizeof(result);
  66   3                      requestHandled  = USBFS_InitControlRead();
  67   3                      break;
  68   3                  case 0x3D: // CMD_GET_XTAL
  69   3                      USBFS_currentTD.pData = (void *)&Si570_Xtal;
  70   3                      USBFS_currentTD.count = sizeof(Si570_Xtal);
  71   3                      requestHandled  = USBFS_InitControlRead();
  72   3                      break;
  73   3                  case 0x3F: // CMD_GET_SI570
  74   3                      USBFS_currentTD.pData = (void *)(Si570_Buf+2);
  75   3                      USBFS_currentTD.count = 6;
  76   3                      requestHandled  = USBFS_InitControlRead();
  77   3                      break;
  78   3                  case 0x50: // CMD_SET_USRP1
  79   3                      if (CY_GET_REG8(USBFS_wValueLo) & 0x01)
  80   3                          TX_Request = 1;
  81   3                      else
  82   3                          TX_Request = 0;
  83   3                      //nobreak, returns key value
  84   3                  case 0x51: // CMD_GET_CW_KEY
  85   3                      *(uint8*)&result = emulated_register();
  86   3                      USBFS_currentTD.pData = (void *)&result;
  87   3                      USBFS_currentTD.count = 1;
  88   3                      requestHandled  = USBFS_InitControlRead();
  89   3                      break;
  90   3                  case 0x20: // CMD_SET_SI570
  91   3                      // Fake a reset!  Used for calibration.
  92   3                      if (CY_GET_REG8(USBFS_wValueHi) == 0x87 && CY_GET_REG16(USBFS_wIndex) == 0x01) {
  93   4                          Si570_Fake_Reset();
  94   4                          *(uint8*)&result = 0;
  95   4                          USBFS_currentTD.pData = (void *)&result;
  96   4                          USBFS_currentTD.count = 1;
  97   4                          requestHandled  = USBFS_InitControlRead();
  98   4                      }
  99   3                      break;
 100   3              }
 101   2          }
 102   1          if ((reqType & USBFS_RQST_DIR_MASK) == USBFS_RQST_DIR_H2D)
 103   1          {
 104   2              switch (reqCmd)
 105   2              {
 106   3                  case 0x30: // CMD_SET_FREQ_REG
 107   3                      USBFS_currentTD.pData = (void *)&Si570_OLD;
 108   3                      USBFS_currentTD.count = 6;
 109   3                      requestHandled  = USBFS_InitControlWrite();
 110   3                      break;
 111   3                  case 0x32: // CMD_SET_FREQ
 112   3                      USBFS_currentTD.pData = (void *)&Si570_LO;
 113   3                      USBFS_currentTD.count = sizeof(Si570_LO);
 114   3                      requestHandled  = USBFS_InitControlWrite();
 115   3                      break;
C51 COMPILER V9.51   USBVEND                                                               10/24/2015 08:30:42 PAGE 3   

 116   3                  case 0x33: // CMD_SET_XTAL
 117   3                      USBFS_currentTD.pData = (void *)&Si570_Xtal;
 118   3                      USBFS_currentTD.count = sizeof(Si570_Xtal);
 119   3                      requestHandled  = USBFS_InitControlWrite();
 120   3                      break;
 121   3              }
 122   2          }
 123   1      
 124   1          return(requestHandled);
 125   1      }
 126          
C51 COMPILER V9.51   USBVEND                                                               10/24/2015 08:30:42 PAGE 4   

ASSEMBLY LISTING OF GENERATED OBJECT CODE


             ; FUNCTION emulated_register (BEGIN)
                                           ; SOURCE LINE # 22
                                           ; SOURCE LINE # 23
0000 E4                CLR     A
0001 900000      R     MOV     DPTR,#reg
0004 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 24
0005 900000      E     MOV     DPTR,#TX_Request
0008 E0                MOVX    A,@DPTR
0009 6007              JZ      ?C0001
000B 900000      R     MOV     DPTR,#reg
000E E0                MOVX    A,@DPTR
000F 4410              ORL     A,#010H
0011 F0                MOVX    @DPTR,A
0012         ?C0001:
                                           ; SOURCE LINE # 25
0012 120000      E     LCALL   Status_Read
;---- Variable 'key' assigned to Register 'R5' ----
0015 AD07              MOV     R5,AR7
                                           ; SOURCE LINE # 26
0017 EF                MOV     A,R7
0018 30E007            JNB     ACC.0,?C0002
001B 900000      R     MOV     DPTR,#reg
001E E0                MOVX    A,@DPTR
001F 4420              ORL     A,#020H
0021 F0                MOVX    @DPTR,A
0022         ?C0002:
                                           ; SOURCE LINE # 27
0022 ED                MOV     A,R5
0023 30E107            JNB     ACC.1,?C0003
0026 900000      R     MOV     DPTR,#reg
0029 E0                MOVX    A,@DPTR
002A 4402              ORL     A,#02H
002C F0                MOVX    @DPTR,A
002D         ?C0003:
                                           ; SOURCE LINE # 28
002D 900000      R     MOV     DPTR,#reg
0030 E0                MOVX    A,@DPTR
0031 FF                MOV     R7,A
                                           ; SOURCE LINE # 29
0032         ?C0004:
0032 22                RET     
             ; FUNCTION emulated_register (END)

             ; FUNCTION USBFS_HandleVendorRqst (BEGIN)
                                           ; SOURCE LINE # 31
                                           ; SOURCE LINE # 32
                                           ; SOURCE LINE # 33
0000 E4                CLR     A
0001 900000      R     MOV     DPTR,#requestHandled
0004 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 36
0005 906000            MOV     DPTR,#06000H
0008 E0                MOVX    A,@DPTR
0009 900000      R     MOV     DPTR,#reqType
000C F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 37
000D 906001            MOV     DPTR,#06001H
0010 E0                MOVX    A,@DPTR
C51 COMPILER V9.51   USBVEND                                                               10/24/2015 08:30:42 PAGE 5   

0011 900000      R     MOV     DPTR,#reqCmd
0014 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 39
0015 900000      R     MOV     DPTR,#reqType
0018 E0                MOVX    A,@DPTR
0019 5480              ANL     A,#080H
001B 6480              XRL     A,#080H
001D 6003              JZ      $ + 5H
001F 020000      R     LJMP    ?C0005
                                           ; SOURCE LINE # 40
                                           ; SOURCE LINE # 41
0022 A3                INC     DPTR
0023 E0                MOVX    A,@DPTR
0024 120000      E     LCALL   ?C?CCASE
0027 0000        R     DW      ?C0007
0029 00                DB      00H
002A 0000        R     DW      ?C0008
002C 02                DB      02H
002D 0000        R     DW      ?C0017
002F 20                DB      020H
0030 0000        R     DW      ?C0009
0032 3A                DB      03AH
0033 0000        R     DW      ?C0010
0035 3C                DB      03CH
0036 0000        R     DW      ?C0011
0038 3D                DB      03DH
0039 0000        R     DW      ?C0012
003B 3F                DB      03FH
003C 0000        R     DW      ?C0013
003E 50                DB      050H
003F 0000        R     DW      ?C0016
0041 51                DB      051H
0042 0000              DW      00H
0044 0000        R     DW      ?C0005
                                           ; SOURCE LINE # 42
                                           ; SOURCE LINE # 43
0046         ?C0007:
                                           ; SOURCE LINE # 44
0046 900000      R     MOV     DPTR,#result
0049 7464              MOV     A,#064H
004B F0                MOVX    @DPTR,A
004C A3                INC     DPTR
004D 740F              MOV     A,#0FH
004F F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 45
0050 7B01              MOV     R3,#01H
0052 7A00        R     MOV     R2,#HIGH result
0054 7900        R     MOV     R1,#LOW result
0056 900000      E     MOV     DPTR,#USBFS_currentTD+02H
0059 120000      E     LCALL   ?C?PSTXDATA
                                           ; SOURCE LINE # 46
005C 900000      E     MOV     DPTR,#USBFS_currentTD
005F E4                CLR     A
0060 F0                MOVX    @DPTR,A
0061 A3                INC     DPTR
0062 7402              MOV     A,#02H
0064 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 47
0065 120000      E     LCALL   USBFS_InitControlRead
0068 900000      R     MOV     DPTR,#requestHandled
006B EF                MOV     A,R7
006C F0                MOVX    @DPTR,A
C51 COMPILER V9.51   USBVEND                                                               10/24/2015 08:30:42 PAGE 6   

                                           ; SOURCE LINE # 48
006D 020000      R     LJMP    ?C0005
                                           ; SOURCE LINE # 49
0070         ?C0008:
                                           ; SOURCE LINE # 51
0070 120000      R     LCALL   emulated_register
0073 900000      R     MOV     DPTR,#result
0076 EF                MOV     A,R7
0077 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 52
0078 120000      E     LCALL   ?C?LLDXDATA
007B EF                MOV     A,R7
007C EE                MOV     A,R6
007D ED                MOV     A,R5
007E EC                MOV     A,R4
007F 4408              ORL     A,#08H
0081 FC                MOV     R4,A
0082 900000      R     MOV     DPTR,#result
0085 120000      E     LCALL   ?C?LSTXDATA
                                           ; SOURCE LINE # 53
0088 7B01              MOV     R3,#01H
008A 7A00        R     MOV     R2,#HIGH result
008C 7900        R     MOV     R1,#LOW result
008E 900000      E     MOV     DPTR,#USBFS_currentTD+02H
0091 120000      E     LCALL   ?C?PSTXDATA
                                           ; SOURCE LINE # 54
0094 900000      E     MOV     DPTR,#USBFS_currentTD
0097 E4                CLR     A
0098 F0                MOVX    @DPTR,A
0099 A3                INC     DPTR
009A 04                INC     A
009B F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 55
009C 120000      E     LCALL   USBFS_InitControlRead
009F 900000      R     MOV     DPTR,#requestHandled
00A2 EF                MOV     A,R7
00A3 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 56
00A4 020000      R     LJMP    ?C0005
                                           ; SOURCE LINE # 57
00A7         ?C0009:
                                           ; SOURCE LINE # 58
00A7 7B01              MOV     R3,#01H
00A9 7A00        E     MOV     R2,#HIGH Si570_LO
00AB 7900        E     MOV     R1,#LOW Si570_LO
00AD 900000      E     MOV     DPTR,#USBFS_currentTD+02H
00B0 120000      E     LCALL   ?C?PSTXDATA
                                           ; SOURCE LINE # 59
00B3 900000      E     MOV     DPTR,#USBFS_currentTD
00B6 E4                CLR     A
00B7 F0                MOVX    @DPTR,A
00B8 A3                INC     DPTR
00B9 7404              MOV     A,#04H
00BB F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 60
00BC 120000      E     LCALL   USBFS_InitControlRead
00BF 900000      R     MOV     DPTR,#requestHandled
00C2 EF                MOV     A,R7
00C3 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 61
00C4 020000      R     LJMP    ?C0005
                                           ; SOURCE LINE # 62
C51 COMPILER V9.51   USBVEND                                                               10/24/2015 08:30:42 PAGE 7   

00C7         ?C0010:
                                           ; SOURCE LINE # 63
00C7 7F70              MOV     R7,#070H
00C9 7E3D              MOV     R6,#03DH
00CB 7D0A              MOV     R5,#0AH
00CD 7C07              MOV     R4,#07H
00CF 120000      E     LCALL   _?swap32
00D2 900000      R     MOV     DPTR,#result
00D5 120000      E     LCALL   ?C?LSTXDATA
                                           ; SOURCE LINE # 64
00D8 7B01              MOV     R3,#01H
00DA 7A00        R     MOV     R2,#HIGH result
00DC 7900        R     MOV     R1,#LOW result
00DE 900000      E     MOV     DPTR,#USBFS_currentTD+02H
00E1 120000      E     LCALL   ?C?PSTXDATA
                                           ; SOURCE LINE # 65
00E4 900000      E     MOV     DPTR,#USBFS_currentTD
00E7 E4                CLR     A
00E8 F0                MOVX    @DPTR,A
00E9 A3                INC     DPTR
00EA 7404              MOV     A,#04H
00EC F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 66
00ED 120000      E     LCALL   USBFS_InitControlRead
00F0 900000      R     MOV     DPTR,#requestHandled
00F3 EF                MOV     A,R7
00F4 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 67
00F5 020000      R     LJMP    ?C0005
                                           ; SOURCE LINE # 68
00F8         ?C0011:
                                           ; SOURCE LINE # 69
00F8 7B01              MOV     R3,#01H
00FA 7A00        E     MOV     R2,#HIGH Si570_Xtal
00FC 7900        E     MOV     R1,#LOW Si570_Xtal
00FE 900000      E     MOV     DPTR,#USBFS_currentTD+02H
0101 120000      E     LCALL   ?C?PSTXDATA
                                           ; SOURCE LINE # 70
0104 900000      E     MOV     DPTR,#USBFS_currentTD
0107 E4                CLR     A
0108 F0                MOVX    @DPTR,A
0109 A3                INC     DPTR
010A 7404              MOV     A,#04H
010C F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 71
010D 120000      E     LCALL   USBFS_InitControlRead
0110 900000      R     MOV     DPTR,#requestHandled
0113 EF                MOV     A,R7
0114 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 72
0115 020000      R     LJMP    ?C0005
                                           ; SOURCE LINE # 73
0118         ?C0012:
                                           ; SOURCE LINE # 74
0118 7B01              MOV     R3,#01H
011A 7A00        E     MOV     R2,#HIGH Si570_Buf+02H
011C 7900        E     MOV     R1,#LOW Si570_Buf+02H
011E 900000      E     MOV     DPTR,#USBFS_currentTD+02H
0121 120000      E     LCALL   ?C?PSTXDATA
                                           ; SOURCE LINE # 75
0124 900000      E     MOV     DPTR,#USBFS_currentTD
0127 E4                CLR     A
C51 COMPILER V9.51   USBVEND                                                               10/24/2015 08:30:42 PAGE 8   

0128 F0                MOVX    @DPTR,A
0129 A3                INC     DPTR
012A 7406              MOV     A,#06H
012C F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 76
012D 120000      E     LCALL   USBFS_InitControlRead
0130 900000      R     MOV     DPTR,#requestHandled
0133 EF                MOV     A,R7
0134 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 77
0135 8074              SJMP    ?C0005
                                           ; SOURCE LINE # 78
0137         ?C0013:
                                           ; SOURCE LINE # 79
0137 906002            MOV     DPTR,#06002H
013A E0                MOVX    A,@DPTR
013B 30E008            JNB     ACC.0,?C0014
                                           ; SOURCE LINE # 80
013E 900000      E     MOV     DPTR,#TX_Request
0141 7401              MOV     A,#01H
0143 F0                MOVX    @DPTR,A
0144 8005              SJMP    ?C0016
0146         ?C0014:
                                           ; SOURCE LINE # 82
0146 E4                CLR     A
0147 900000      E     MOV     DPTR,#TX_Request
014A F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 84
014B         ?C0016:
                                           ; SOURCE LINE # 85
014B 120000      R     LCALL   emulated_register
014E 900000      R     MOV     DPTR,#result
0151 EF                MOV     A,R7
0152 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 86
0153 7B01              MOV     R3,#01H
0155 7A00        R     MOV     R2,#HIGH result
0157 7900        R     MOV     R1,#LOW result
0159 900000      E     MOV     DPTR,#USBFS_currentTD+02H
015C 120000      E     LCALL   ?C?PSTXDATA
                                           ; SOURCE LINE # 87
015F 900000      E     MOV     DPTR,#USBFS_currentTD
0162 E4                CLR     A
0163 F0                MOVX    @DPTR,A
0164 A3                INC     DPTR
0165 04                INC     A
0166 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 88
0167 120000      E     LCALL   USBFS_InitControlRead
016A 900000      R     MOV     DPTR,#requestHandled
016D EF                MOV     A,R7
016E F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 89
016F 803A              SJMP    ?C0005
                                           ; SOURCE LINE # 90
0171         ?C0017:
                                           ; SOURCE LINE # 92
0171 906003            MOV     DPTR,#06003H
0174 E0                MOVX    A,@DPTR
0175 B48733            CJNE    A,#087H,?C0005
0178 7B02              MOV     R3,#02H
017A 7A60              MOV     R2,#060H
C51 COMPILER V9.51   USBVEND                                                               10/24/2015 08:30:42 PAGE 9   

017C 7904              MOV     R1,#04H
017E 120000      E     LCALL   _cyread16_nodpx
0181 EF                MOV     A,R7
0182 6401              XRL     A,#01H
0184 4E                ORL     A,R6
0185 7024              JNZ     ?C0005
                                           ; SOURCE LINE # 93
0187 120000      E     LCALL   Si570_Fake_Reset
                                           ; SOURCE LINE # 94
018A E4                CLR     A
018B 900000      R     MOV     DPTR,#result
018E F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 95
018F 7B01              MOV     R3,#01H
0191 7A00        R     MOV     R2,#HIGH result
0193 7900        R     MOV     R1,#LOW result
0195 900000      E     MOV     DPTR,#USBFS_currentTD+02H
0198 120000      E     LCALL   ?C?PSTXDATA
                                           ; SOURCE LINE # 96
019B 900000      E     MOV     DPTR,#USBFS_currentTD
019E E4                CLR     A
019F F0                MOVX    @DPTR,A
01A0 A3                INC     DPTR
01A1 04                INC     A
01A2 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 97
01A3 120000      E     LCALL   USBFS_InitControlRead
01A6 900000      R     MOV     DPTR,#requestHandled
01A9 EF                MOV     A,R7
01AA F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 98
                                           ; SOURCE LINE # 99
                                           ; SOURCE LINE # 100
                                           ; SOURCE LINE # 101
01AB         ?C0005:
                                           ; SOURCE LINE # 102
01AB 900000      R     MOV     DPTR,#reqType
01AE E0                MOVX    A,@DPTR
01AF 5480              ANL     A,#080H
01B1 7068              JNZ     ?C0019
                                           ; SOURCE LINE # 103
                                           ; SOURCE LINE # 104
01B3 A3                INC     DPTR
01B4 E0                MOVX    A,@DPTR
01B5 24CE              ADD     A,#0CEH
01B7 6026              JZ      ?C0022
01B9 14                DEC     A
01BA 6042              JZ      ?C0023
01BC 2403              ADD     A,#03H
01BE 705B              JNZ     ?C0019
                                           ; SOURCE LINE # 105
                                           ; SOURCE LINE # 106
01C0         ?C0021:
                                           ; SOURCE LINE # 107
01C0 7B01              MOV     R3,#01H
01C2 7A00        E     MOV     R2,#HIGH Si570_OLD
01C4 7900        E     MOV     R1,#LOW Si570_OLD
01C6 900000      E     MOV     DPTR,#USBFS_currentTD+02H
01C9 120000      E     LCALL   ?C?PSTXDATA
                                           ; SOURCE LINE # 108
01CC 900000      E     MOV     DPTR,#USBFS_currentTD
01CF E4                CLR     A
C51 COMPILER V9.51   USBVEND                                                               10/24/2015 08:30:42 PAGE 10  

01D0 F0                MOVX    @DPTR,A
01D1 A3                INC     DPTR
01D2 7406              MOV     A,#06H
01D4 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 109
01D5 120000      E     LCALL   USBFS_InitControlWrite
01D8 900000      R     MOV     DPTR,#requestHandled
01DB EF                MOV     A,R7
01DC F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 110
01DD 803C              SJMP    ?C0019
                                           ; SOURCE LINE # 111
01DF         ?C0022:
                                           ; SOURCE LINE # 112
01DF 7B01              MOV     R3,#01H
01E1 7A00        E     MOV     R2,#HIGH Si570_LO
01E3 7900        E     MOV     R1,#LOW Si570_LO
01E5 900000      E     MOV     DPTR,#USBFS_currentTD+02H
01E8 120000      E     LCALL   ?C?PSTXDATA
                                           ; SOURCE LINE # 113
01EB 900000      E     MOV     DPTR,#USBFS_currentTD
01EE E4                CLR     A
01EF F0                MOVX    @DPTR,A
01F0 A3                INC     DPTR
01F1 7404              MOV     A,#04H
01F3 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 114
01F4 120000      E     LCALL   USBFS_InitControlWrite
01F7 900000      R     MOV     DPTR,#requestHandled
01FA EF                MOV     A,R7
01FB F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 115
01FC 801D              SJMP    ?C0019
                                           ; SOURCE LINE # 116
01FE         ?C0023:
                                           ; SOURCE LINE # 117
01FE 7B01              MOV     R3,#01H
0200 7A00        E     MOV     R2,#HIGH Si570_Xtal
0202 7900        E     MOV     R1,#LOW Si570_Xtal
0204 900000      E     MOV     DPTR,#USBFS_currentTD+02H
0207 120000      E     LCALL   ?C?PSTXDATA
                                           ; SOURCE LINE # 118
020A 900000      E     MOV     DPTR,#USBFS_currentTD
020D E4                CLR     A
020E F0                MOVX    @DPTR,A
020F A3                INC     DPTR
0210 7404              MOV     A,#04H
0212 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 119
0213 120000      E     LCALL   USBFS_InitControlWrite
0216 900000      R     MOV     DPTR,#requestHandled
0219 EF                MOV     A,R7
021A F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 120
                                           ; SOURCE LINE # 121
                                           ; SOURCE LINE # 122
021B         ?C0019:
                                           ; SOURCE LINE # 124
021B 900000      R     MOV     DPTR,#requestHandled
021E E0                MOVX    A,@DPTR
021F FF                MOV     R7,A
                                           ; SOURCE LINE # 125
C51 COMPILER V9.51   USBVEND                                                               10/24/2015 08:30:42 PAGE 11  

0220         ?C0024:
0220 22                RET     
             ; FUNCTION USBFS_HandleVendorRqst (END)



MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    596    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =      4       4
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
   EDATA SIZE       =   ----    ----
   HDATA SIZE       =   ----    ----
   XDATA CONST SIZE =   ----    ----
   FAR CONST SIZE   =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
